-- Created by Vertabelo (http://vertabelo.com)
-- Last modification date: 2020-12-04 11:44:18.226
CREATE DATABASE BANHANG
go
-- tables
-- Table: CHITIETHOADON
CREATE TABLE CHITIETHOADON (
    MaHD nvarchar(5)  NOT NULL,
    MaSP nvarchar(5)  NOT NULL,
    SoLuong int  NOT NULL,
    CONSTRAINT CHITIETHOADON_pk PRIMARY KEY  (MaHD)
);

-- Table: HOADON
CREATE TABLE HOADON (
    MaHD nvarchar(5)  NOT NULL,
    MaKH nvarchar(5)  NOT NULL,
    TenKH nvarchar(50)  NOT NULL,
    MaSP nvarchar(5)  NOT NULL,
    SoLuong int  NOT NULL,
    ThanhTien money  NOT NULL,
    NgayTaoHD int  NOT NULL,
    CONSTRAINT HOADON_pk PRIMARY KEY  (MaHD)
);

-- Table: KHACHHANG
CREATE TABLE KHACHHANG (
    MaKH nvarchar(5)  NOT NULL,
    TenKH nvarchar(50)  NOT NULL,
    DiaChi nvarchar(50)  NOT NULL,
    SDT nvarchar(50)  NOT NULL,
    Email nvarchar(50)  NOT NULL,
    CONSTRAINT KHACHHANG_pk PRIMARY KEY  (MaKH)
);

-- Table: LOAISANPHAM
CREATE TABLE LOAISANPHAM (
    LoaiSP nvarchar(5)  NOT NULL,
    TenLoaiSP nvarchar(50)  NOT NULL,
    CONSTRAINT LOAISANPHAM_pk PRIMARY KEY  (LoaiSP)
);

-- Table: SANPHAM
CREATE TABLE SANPHAM (
    MaSP nvarchar(5)  NOT NULL,
    LoaiSP nvarchar(5)  NOT NULL,
    TenSP nvarchar(50)  NOT NULL,
    Gia money  NOT NULL,
    NgaySX datetime  NOT NULL,
    CONSTRAINT SANPHAM_pk PRIMARY KEY  (MaSP)
);

-- foreign keys
-- Reference: CHITIETHOADON_HOADON (table: CHITIETHOADON)
ALTER TABLE CHITIETHOADON ADD CONSTRAINT CHITIETHOADON_HOADON
    FOREIGN KEY (MaHD)
    REFERENCES HOADON (MaHD);

-- Reference: CHITIETHOADON_SANPHAM (table: CHITIETHOADON)
ALTER TABLE CHITIETHOADON ADD CONSTRAINT CHITIETHOADON_SANPHAM
    FOREIGN KEY (MaSP)
    REFERENCES SANPHAM (MaSP);

-- Reference: HOADON_KHACHHANG (table: HOADON)
ALTER TABLE HOADON ADD CONSTRAINT HOADON_KHACHHANG
    FOREIGN KEY (MaKH)
    REFERENCES KHACHHANG (MaKH);

-- Reference: HOADON_SANPHAM (table: HOADON)
ALTER TABLE HOADON ADD CONSTRAINT HOADON_SANPHAM
    FOREIGN KEY (MaSP)
    REFERENCES SANPHAM (MaSP);

-- Reference: SANPHAM_LOAISANPHAM (table: SANPHAM)
ALTER TABLE SANPHAM ADD CONSTRAINT SANPHAM_LOAISANPHAM
    FOREIGN KEY (LoaiSP)
    REFERENCES LOAISANPHAM (LoaiSP);

-- End of file.

--KHACH HANG
INSERT INTO KHACHHANG VALUES('1',N'Trần Vũ Hoàng',N'10 Trần Kế Xương, F.7, Q.Phú Nhuận, TP.HCM','0905919290','tranvuhoang@gmail.com')
INSERT INTO KHACHHANG VALUES('2',N'Trần Quang Huy',N'436A/63 đường 3/2, P12, Q10, HCM','01658601161','tranquanghuy@gmail.com')

select * from KHACHHANG
--LOAI SAN PHAM
INSERT INTO LOAISANPHAM VALUES('BC',N'Bút chì')
INSERT INTO LOAISANPHAM VALUES('BB',N'Bút bi')

select * from LOAISANPHAM
--SANPHAM
INSERT INTO SANPHAM VALUES('1','BC',N'Bút chì','5000','2-1-2020')
INSERT INTO SANPHAM VALUES('2','BB',N'Bút bi','10000','2-1-2020')

select * from SANPHAM
--HOADON
INSERT INTO HOADON VALUES('1','1',N'Trần Vũ Hoàng','1','5','25000','25')
INSERT INTO HOADON VALUES('2','2',N'Trần Quang Huy','2','5','50000','25')

select * from HOADON
--CHI TIET HOA DON
INSERT INTO CHITIETHOADON VALUES('1','1','5')
INSERT INTO CHITIETHOADON VALUES('2','2','5')

select * from CHITIETHOADON